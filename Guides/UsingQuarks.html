<!doctype html><html lang='en'><head><title>Using Quarks | SuperCollider 3.14.0-rc1 Help</title>
<link rel='stylesheet' href='./../static/scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../static/codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../static/editor.css' type='text/css' />
<link rel='stylesheet' id='scdoc-theme' href='./../static/themes/default.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<link rel='stylesheet' href='./../static/lib/katex/katex.min.css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../static/lib/jquery.min.js'></script>
<script src='./../static/lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../static/lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script defer src='./../static/lib/katex/katex.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'Using Quarks';
var scdoc_sc_version = '3.14.0-rc1';
</script>
<script src='./../static/scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../frontend.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>Using Quarks:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#Preliminary%20stages'>Preliminary stages</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#Installing/uninstalling/updating%20quarks'>Installing/uninstalling/updating quarks</a></li>
<ul class='toc'><li class='toc2'><a href='#using%20the%20GUI'>using the GUI</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#by%20name'>by name</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#by%20git%20URL'>by git URL</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#from%20a%20local%20folder'>from a local folder</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Recompile%20the%20class%20library'>Recompile the class library</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Internals'>Internals</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Fixing%20Conflicts'>Fixing Conflicts</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Updating%20Quarks'>Updating Quarks</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#Saving%20and%20Loading%20sets%20of%20Quarks'>Saving and Loading sets of Quarks</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#Making%20your%20own%20Quarks'>Making your own Quarks</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#Publishing%20a%20Quark'>Publishing a Quark</a></li>
<ul class='toc'><li class='toc2'><a href='#Migrated%20Quarks%20from%20SVN'>Migrated Quarks from SVN</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#git%20branches'>git branches</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#Quark%20file'>Quark file</a></li>
<ul class='toc'><li class='toc2'><a href='#Hooks'>Hooks</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Deprecated/ignored%20fields'>Deprecated/ignored fields</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#Contributing%20fixes%20to%20a%20quark'>Contributing fixes to a quark</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#Offline%20Usage'>Offline Usage</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Guides</span>
 | <span id='categories'><a href='./../Browse.html#Quarks'>Quarks</a></span>
</div><h1>Using Quarks</h1>
<div id='summary'>A guide to Quarks</div>
</div>
<div class='subheader'>
<div id='related'>See also: <a href="./../Classes/Quarks.html">Quarks</a>, <a href="./../Classes/Quark.html">Quark</a>, <a href="./../Classes/Git.html">Git</a></div>
</div>

<p>Quarks are packages of SuperCollider code containing classes, extension methods, documentation and server UGen plugins. The Quarks class manages downloading these packages and installing or uninstalling them.<div class='warning'><span class='warninglabel'>WARNING:</span> As individual users or groups develop their own Quark for different purposes, it is possible that installing multiple packages could cause problems because they conflict with each other. We therefore recommend that you select and install only the packages that you need. It may also be helpful to install one Quark package at a time, which should make it easier to troubleshoot problems as they arise.</div><div class='note'><span class='notelabel'>NOTE:</span> If you have trouble finding the Quarks package you need, you may find the Quarks package information in the following encyclopaedia useful: <a href="https://baryon.supercollider.online">https://baryon.supercollider.online</a></div><h2><a class='anchor' name='Preliminary%20stages'>Preliminary stages</a></h2>

<p>Quarks installation depends on <em>git</em> version-control software. Detailed installation instructions may be found at <a href="https://git-scm.com">https://git-scm.com</a>.<ul>
<li>Windows users can download and install the appropriate installation file for their environment from <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a>.<li>Linux users can copy the appropriate terminal commands from <a href="https://git-scm.com/download/linux">https://git-scm.com/download/linux</a> for their environment and run them in a terminal window.<li>For Mac users, we recommend installing git from Homebrew, as described at <a href="https://git-scm.com/download/mac">https://git-scm.com/download/mac</a>. If you are unsure whether you have Homebrew installed, follow the instructions for installing Homebrew first. You may also need to install 'Xcode Command Line Tools' if a window pops up asking you to install it.</ul>
<h2><a class='anchor' name='Installing/uninstalling/updating%20quarks'>Installing/uninstalling/updating quarks</a></h2>
<h3><a class='anchor' name='using%20the%20GUI'>using the GUI</a></h3>

<p>You can install Quarks using the interface:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.gui</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>This offers many community contributed packages most of which are hosted on github.
<p>You can also add additional folders where you keep your personally developed quarks or those you have forked or downloaded. These will also be shown on the GUI as options for installing.<div class='codeMirrorContainer'><textarea class='editor'>// put this in your startup.scd
Quarks.addFolder("~/supercollider/quarks");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='by%20name'>by name</a></h3>

<p>You can (un)install a Quark by name:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.install("MathLib");
Quarks.uninstall("MathLib");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='by%20git%20URL'>by git URL</a></h3>
<div class='codeMirrorContainer'><textarea class='editor'>Quarks.install("https://github.com/supercollider-quarks/MathLib.git");
// uninstall it
Quarks.uninstall("https://github.com/supercollider-quarks/MathLib.git");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='from%20a%20local%20folder'>from a local folder</a></h3>

<p>and you can install any local folder:<div class='codeMirrorContainer'><textarea class='editor'>// add your own classes
Quarks.install("~/supercollider/quarks/my-thing");
// install something that you downloaded and want to try out
Quarks.install("~/Downloads/something-i-found");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>You can also add a folder where you keep your development quarks (your own and things you have forked):<div class='codeMirrorContainer'><textarea class='editor'>Quarks.addFolder("~/supercollider/quarks");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>Now each quark inside that folder will appear on the GUI for you to un/install.
<p>If you wish to be able to uninstall local quarks, but still see them in the GUI, it is highly recommended to collect your local quark directories under a single primary directory. Then, use <a href="./../Classes/Quarks.html#*addFolder">Quarks: *addFolder</a> to add the primary directory. <code>addFolder</code> does not add individual quark directories.<h3><a class='anchor' name='Recompile%20the%20class%20library'>Recompile the class library</a></h3>

<p>After installing or uninstalling you need to <strong>Language &gt; Recompile Class Library</strong>
<p>If you've made a bit of a mess:<div class='codeMirrorContainer'><textarea class='editor'>// remove everything
Quarks.clear</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='Internals'>Internals</a></h3>

<p>When you install one it is cloned using git into:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.folder;
// open the folder and have a look
Quarks.openFolder;</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>and this path is added to the <a href="./../Classes/LanguageConfig.html">LanguageConfig</a> includePaths so that the classes are in SuperCollider's class path when you recompile the library.
<p>You can view and edit the current include paths via <strong>Preferences &gt; Interpreter &gt; Include Paths</strong>.<div class='codeMirrorContainer'><textarea class='editor'>LanguageConfig.includePaths</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>You can also see or edit these settings in the file sclang_config.yaml<h3><a class='anchor' name='Fixing%20Conflicts'>Fixing Conflicts</a></h3>

<p>SuperCollider does not allow duplicate class definitions and will fail to compile if you've accidentally installed conflicting packages.
<p>The Quarks interface can only work if SuperCollider is compiled and running, so if something goes wrong then you have to fix it manually.
<p>If you are using the SC IDE then open <strong>Preferences &gt; Interpreter</strong> and remove the paths from the Include Paths.
<p>You can also manually edit <code>sclang_config.yaml</code><h3><a class='anchor' name='Updating%20Quarks'>Updating Quarks</a></h3>

<p>You can update all installed Quarks by evaluating the following code:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.all.do{ |quark| quark.update() };</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>or by pressing the 'Check for updates' button after evaluating the following code:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.gui</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h2><a class='anchor' name='Saving%20and%20Loading%20sets%20of%20Quarks'>Saving and Loading sets of Quarks</a></h2>

<p>To make project work simpler you can save and later reload your currently installed Quarks to and from a quarks.txt file. This is similar to what the LanguageConfig does but this also downloads the Quarks if needed and installs all dependencies.
<p>This is very useful for projects because you can pin the exact releases of each Quark that your project depends on and you should be able to reload them exactly even years in the future.<div class='codeMirrorContainer'><textarea class='editor'>// save your current state
Quarks.save("~/supercollider/quarks.txt");
// reload it later
Quarks.load("~/supercollider/quarks.txt");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>This saves both what quarks you have and what git revision they are on. If you have uncommitted changes in one of the quarks then it will warn you that its dirty.
<p>The save format specifies the revisions using git tags with a fall back to the full sha hash that specifies the revision. In git terminology this is known as a refspec.
<p>If you have installed local paths that are not under git source control (your own work or things you have downloaded) then the paths will be saved without any version or refspec.
<p>The file format looks like this:<div class='codeMirrorContainer'><textarea class='editor'>https://github.com/author/quarkname@tags/4.1.4
https://github.com/supercollider-quarks/ddwCommon@8ae156b460dcb08285013265cf3a1c7172bba665
~/supercollider/quarks/my-thing</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>Note that in this case `quarkname` was checked out to the tag 4.1.4, and `ddwCommon` was not on a tag so the refspec is the SHA hash. In both cases this results in an exact reference. `~/supercollider/quarks/my-thing` was not a git repo so the best it can do is to specify the path.
<p>Even if a quark was installed by name using the directory, the full repository URL will be saved to ensure that the reference is unvarying (the directory.txt could be edited and the URL changed, and that might then point to different source code).
<p>Any packages not under git source control are specified by path, abbreviated to the most logical path relative to the quark file, the home directory or by absolute path. They do not have a version or refspec.<h2><a class='anchor' name='Making%20your%20own%20Quarks'>Making your own Quarks</a></h2>

<p>Packages are a natural way to store your work.
<p>Install any source code folder as a Quark:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.install("~/path/to/my-quark")</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>Or create a folder where you do your development work and add that to the additional folders:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.addFolder("~/supercollider/quarks");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>Now you can (un)install your own packages from your local folder.
<p>Managing your code with git is optional, but you should consider using it early on. Even if you do not intend to share your code with anyone else, git provides a backup system and a time machine if you break something.<div class='codeMirrorContainer'><textarea class='editor'># in the terminal, its easy as this:
git init</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>Bitbucket offers free hosting for private repositories, and you can setup your own git host on any machine that you have SSH access to. But you don't even need an externally hosted repository to use git.
<p>Hard drives die, backups fail, people make mistakes. If you keep a copy on bitbucket then your work is that much safer.<h2><a class='anchor' name='Publishing%20a%20Quark'>Publishing a Quark</a></h2>

<p>Make a git repository and push it to github, gitlab, bitbucket or any publicly accessible git host.
<p>Be sure to <strong>tag your releases</strong>. The name of a tag should be the release version to which it corresponds. Using <a href="https://semver.org">Semantic Versioning</a> (eg "v1.0.1") is strongly recommended. This provides the Quarks system with the ability to list available versions and allow the user to choose which version to checkout. Version tags also allow other quark developpers to pin their dependencies to specific release versions.
<p>You can add your quark to the Community Quark Directory by adding its name and git URL to the following file:
<p><a href="https://github.com/supercollider-quarks/quarks/blob/master/directory.txt">https://github.com/supercollider-quarks/quarks/blob/master/directory.txt</a>
<p>Simply click <code>edit</code>, add in your quark's info, and submit a pull request. Here's an example of what an entry should look like in the Quark Directory:<div class='codeMirrorContainer'><textarea class='editor'>quarkname=https://github.com/author/quarkname</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='Migrated%20Quarks%20from%20SVN'>Migrated Quarks from SVN</a></h3>

<p>I (felix) migrated the old SVN repository to github and preserved all the commits and authorship. You may find your old work in one of these quarks:
<p><a href="https://github.com/supercollider-quarks">https://github.com/supercollider-quarks</a>
<p>Contact me to transfer ownership to your own github account. You may also just fork any repo there, or if you've already moved your code to github then just edit the directory to point to your preferred newer version.
<p>Quarks with spaces in the name had to have those spaces removed. Quarks nested inside other quarks (dewdrop_lib) are now un-nested.<h3><a class='anchor' name='git%20branches'>git branches</a></h3>

<p>Releases are specified with a git tag which refers to a specific commit regardless of what branch it is on. The default branch is master, but the branch does not really matter, only the tag. If you are not tagging specific releases then Quarks will fetch the master branch.<h2><a class='anchor' name='Quark%20file'>Quark file</a></h2>

<p>The quark file is a SuperCollider code file containing authorship, version, copyright and dependency information. It is optional but recommended. None of the fields are required and you may include any custom fields you like.
<p>The most important feature is to specify dependencies, version, summary and to specify the help file.
<p>It's similar to the package.json file in npm (JavaScript package manager) or bower.json for Bower (web/frontend package manager).
<p>The file name is the name of the quark followed by the .quark extension:<div class='codeMirrorContainer'><textarea class='editor'>{quark name}.quark</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>and is a SuperCollider file that returns an IdentityDictionary<div class='codeMirrorContainer'><textarea class='editor'>(
  name: "DemonWidgets",
  summary: "Widgets, gadgets and arcane devices for summoning demons.",
  version: "1.0.0",
  schelp: "DemonWidgets",
  dependencies: ["Bjorklund", "Canvas3D", "cruciallib@tags/4.1.4"],
  license: "GPL",
  copyright: "Frank Furter, Dr.-Ing. 2015"
)</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>Common fields<ul>
<li>name<li>summary<li>author<li>copyright<li>license - default is GPL<li>version - semver compatible string is preferred eg. "1.0.0"<li>schelp - title of the primary help file<li>url - home page, defaults to the github/bitbucket url<li>dependencies - see below<li>isCompatible - a function returning a Boolean. Can check for presence of classes, features, version numbers.<li>organization<li>country<li>since<li>ext_dependency - text describing external software like "PD" or "processing"<li>preInstall - a function / hook which will be called before installation - see <a href="./../Guides/UsingQuarks.html#Hooks">Using Quarks: Hooks</a></ul>

<p>dependencies is a list of Quarks or git urls with optional an @refspec<div class='codeMirrorContainer'><textarea class='editor'>Bjorklund
cruciallib@tags/4.1.4</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='Hooks'>Hooks</a></h3>
<div class='note'><span class='notelabel'>NOTE:</span> Introduced in SuperCollider 3.13 and therefore only available if running at least this version.</div>
<p>It is possible to run a functions which are defined in the <code>.quark</code> file at specific points of installation or update process, so called "hooks".
<p>This can be used to setup or delete certain directory structures, check for hardware, etc.
<p>Upon execution, the hook function will be handled <a href="./../Classes/Quark.html#-data">Quark: -data</a>, which is the parsed <code>.quark</code> file as an <a href="./../Classes/Event.html">Event</a>, as the first argument.
<p>The following hooks are available and will be executed by <a href="./../Classes/Quark.html#-runHook">Quark: -runHook</a><table>
<tr><td>\preInstall<td>Will be executed before <a href="./../Classes/Quarks.html#*link">Quarks: *link</a><td><tr><td>\postInstall<td>Will be executed after <a href="./../Classes/Quarks.html#*link">Quarks: *link</a><td><tr><td>\preUpdate<td>Will be executed before <a href="./../Classes/Git.html#-pull">Git: -pull</a><td>Upon execution this will have the old state of the <code>.quark</code> file<tr><td>\postUpdate<td>Will be executed after <a href="./../Classes/Git.html#-pull">Git: -pull</a><td>Upon execution this will have the new, updated state of the <code>.quark</code> file<tr><td>\preUninstall<td>Will be executed before <a href="./../Classes/Quarks.html#*unlink">Quarks: *unlink</a><td><tr><td>\postUninstall<td>Will be executed after <a href="./../Classes/Quarks.html#*unlink">Quarks: *unlink</a><td></table>
An example to create a directory with samples for a Quark could look like<div class='codeMirrorContainer'><textarea class='editor'>(
  name: "DemonWidgets",
  // ...
  preInstall: {|data|
    File.mkdir("~/samples/%".format(data[\name]));
  },
  postUninstall: {
    "Samples at '~/samples/DomenWidgets' must be deleted manually".warn;
  },
)</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>
<h3><a class='anchor' name='Deprecated/ignored%20fields'>Deprecated/ignored fields</a></h3>

<p><code>path</code> was used for SVN
<p><code>helpdoc</code> specifies an html help file in the Quark. It will still work and will load the helpfile, but schelp is preferred.<h2><a class='anchor' name='Contributing%20fixes%20to%20a%20quark'>Contributing fixes to a quark</a></h2>

<p>Best practice is to clone the quark into a folder where you do your development work. Make a ~/supercollider/quarks (or wherever you want it) and add this to the Quarks folders:<div class='codeMirrorContainer'><textarea class='editor'>Quarks.addFolder("~/supercollider/quarks");</textarea>
<button class='copy-button' aria-label='Copy code'><span class='copy-ico'>⧉</span><span class='check-ico'>✔</span></button></div>

<p>git clone the quark into that folder. You can do your development work / hacking there and submit a pull request to the repository owner.
<p>There is a git extension that is quite useful for working with github repositories is <a href="https://hub.github.com">https://hub.github.com</a>
<p>If you use Quarks.gui you should now be able to see both the downloaded version of the quark and also your own cloned version.<h2><a class='anchor' name='Offline%20Usage'>Offline Usage</a></h2>

<p>Quarks should be usable even when offline. The directory is cached, refreshed every four hours. Cloned quarks can switch versions without needing to be online.
<p>You can download a zipped release of all quarks:
<p><a href="https://github.com/supercollider-quarks/quarks/releases">https://github.com/supercollider-quarks/quarks/releases</a><div class='doclink'>helpfile source: <a href='https://github.com/supercollider/supercollider/tree/3.14/HelpSource/Guides/UsingQuarks.schelp'>https://github.com/supercollider/supercollider/tree/3.14/HelpSource/Guides/UsingQuarks.schelp</a><br>link::Guides/UsingQuarks::<br></div></div><script src='./../static/editor.js' type='text/javascript'></script>
</body></html>